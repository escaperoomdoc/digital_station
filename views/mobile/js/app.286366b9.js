(function(t){function e(e){for(var s,n,o=e[0],c=e[1],l=e[2],v=0,f=[];v<o.length;v++)n=o[v],i[n]&&f.push(i[n][0]),i[n]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(f.length)f.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,o=1;o<a.length;o++){var c=a[o];0!==i[c]&&(s=!1)}s&&(r.splice(e--,1),t=n(n.s=a[0]))}return t}var s={},i={app:0},r=[];function n(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=s,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(a,s,function(e){return t[e]}.bind(null,s));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var s=a("64a9"),i=a.n(s);i.a},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var s=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("header",[a("div",[a("div",[t._v("Станция «Цифровая»")]),a("div",[t._v(t._s(t.time))])]),a("div",[a("div",[t._v(t._s(t.name))]),a("div",[t._v(t._s(t.fio))])])]),a("main",[a("ul",[t._m(0),t._l(t.ways,function(e,s){return a("div",{key:s},[a("li",{staticClass:"list",class:["list_"+t.ways[s].status,{list_active:t.ways[s].active},{list_ready_state:t.ways[s].active&&"ready"==t.message.state},{list_active_state:t.ways[s].active&&"active"==t.message.state&&t.message.time>=0},{list_fail_state:t.ways[s].active&&"active"==t.message.state&&t.message.time<0}],style:t.progressBar(e),on:{click:function(e){return t.changeWay(s)}}},[a("div",[t._v(t._s(t.ways[s].way))]),a("div",[t._v(t._s(t.ways[s].stock))]),a("div",[t._v(t._s(t.ways[s].status_alias))]),t.ways[s].active&&"active"==t.message.state?a("div",{staticClass:"timeActive"},[t._v(t._s(t.message.time)+" мин")]):t._e()]),a("transition",{attrs:{name:"submenu"}},[s==t.selectedWay?a("div",{staticClass:"submenu",staticStyle:{overflow:"hidden"}},["operation"!=t.ways[s].status||t.ways[s].active?t._e():a("p",[t._v("Работают другие бригады")]),"free"==t.ways[s].status?a("p",[t._v("Работы не ведутся")]):t._e(),t.ways[s].active&&"idle"==t.message.state?a("p",[t._v("Ожидание команды...")]):t._e(),t.ways[s].active&&"idle"!=t.message.state?a("p",[t._v(t._s(t.message.text))]):t._e(),t.ways[s].active&&"active"==t.message.state?a("div",{staticClass:"buttons"},[a("button",{staticClass:"confirm",on:{click:t.confirm}},[t._v("OK")]),a("button",{staticClass:"cancel",on:{click:t.cancel}},[t._v("Cancel")])]):t._e()]):t._e()])],1)})],2)])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",{staticClass:"list list_header"},[a("div",[t._v("Путь")]),a("div",[t._v("Состав")]),a("div",[t._v("Статус")])])}],n=(a("7f7f"),a("ac4d"),a("8a81"),a("ac6a"),{data:function(){return{ways:[{way:"",stock:"",status:"free",status_alias:"Загрузка...",active:!1}],message:{state:"active",time:"5",text:"Текст сообщения",progress:"50"},selectedWay:NaN,time:"СТОП",name:"Должность",fio:"ФИО"}},methods:{confirm:function(){socket.emit("client2server",'{"command":"complete"}'),this.selectedWay=NaN},cancel:function(){},changeWay:function(t){this.selectedWay==t?this.selectedWay=NaN:this.selectedWay=t},progressBar:function(t){if(t.active&&"active"==this.message.state&&this.message.time>=0){var e=+this.message.progress;e<0?e=0:e>100&&(e=100);var a=e+5,s="linear-gradient(to right, #7AFF90 "+e+"%, #E6FFEA "+a+"%)";return{background:s}}},updateList:function(t,e){this.time=t.timestring,this.ways.splice(0,this.ways.length);var a=!0,s=!1,i=void 0;try{for(var r,n=t.stocks[Symbol.iterator]();!(a=(r=n.next()).done);a=!0){var o=r.value,c=o["way"],l="",u="",v="",f=o.active;o.status?(l=o.stock,v=o.status,u="operation"):(l="—",v="Нет данных",u="free"),this.ways.push({way:c,stock:l,status:u,status_alias:v,active:f})}}catch(W){s=!0,i=W}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}var d=!0,y=!1,m=void 0;try{for(var p,h=t.messages[Symbol.iterator]();!(d=(p=h.next()).done);d=!0){var _=p.value;if(_.type===e){if("ready"!==this.message.state&&"ready"===_.state||"active"!==this.message.state&&"active"===_.state){for(var g=0;g<this.ways.length;g++){var w=this.ways[g];!0===w.active&&(this.selectedWay=g)}console.log("Message!");try{audio.play(),navigator.vibrate(1e3)}catch(C){console.log("ERROR (audio or vibrate): "+C)}}this.message.state=_.state,this.message.time=_.time,this.message.text=_.text,this.message.progress=_.progress}}}catch(W){y=!0,m=W}finally{try{d||null==h.return||h.return()}finally{if(y)throw m}}var b=!0,k=!1,x=void 0;try{for(var O,S=t.messages[Symbol.iterator]();!(b=(O=S.next()).done);b=!0){var j=O.value;if(j.type===e){this.fio=j.fio,this.name=j.name;break}}}catch(W){k=!0,x=W}finally{try{b||null==S.return||S.return()}finally{if(k)throw x}}}},mounted:function(){var t=this;socket.on("server2client",function(e){try{var a=JSON.parse(e);t.updateList(a,user)}catch(s){console.log("ERROR : "+s+" # "+e)}})}}),o=n,c=(a("034f"),a("2877")),l=Object(c["a"])(o,i,r,!1,null,null,null),u=l.exports;s["a"].config.productionTip=!1,new s["a"]({render:function(t){return t(u)}}).$mount("#app")},"64a9":function(t,e,a){}});
//# sourceMappingURL=app.36d41577.js.map